---
title: Verwenden von migrate.exe-EF6
description: Verwenden von migrate.exe in Entity Framework 6
author: ajcvickers
ms.date: 10/23/2016
uid: ef6/modeling/code-first/migrations/migrate-exe
ms.openlocfilehash: f57f56f7e3fe876c7265526bf6541e3c9e91ca7d
ms.sourcegitcommit: 0a25c03fa65ae6e0e0e3f66bac48d59eceb96a5a
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 10/14/2020
ms.locfileid: "92066368"
---
# <a name="using-migrateexe"></a><span data-ttu-id="3825e-103">Verwenden von migrate.exe</span><span class="sxs-lookup"><span data-stu-id="3825e-103">Using migrate.exe</span></span>
<span data-ttu-id="3825e-104">Code First-Migrationen kann zum Aktualisieren einer Datenbank in Visual Studio verwendet werden, kann aber auch über das Befehlszeilen Tool migrate.exe ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="3825e-104">Code First Migrations can be used to update a database from inside visual studio, but can also be executed via the command line tool migrate.exe.</span></span> <span data-ttu-id="3825e-105">Auf dieser Seite erhalten Sie einen kurzen Überblick über die Verwendung von migrate.exe zum Ausführen von Migrationen für eine-Datenbank.</span><span class="sxs-lookup"><span data-stu-id="3825e-105">This page will give a quick overview on how to use migrate.exe to execute migrations against a database.</span></span>

> [!NOTE]
> <span data-ttu-id="3825e-106">In diesem Artikel wird davon ausgegangen, dass Sie wissen, wie Code First-Migrationen in einfachen Szenarien verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="3825e-106">This article assumes you know how to use Code First Migrations in basic scenarios.</span></span> <span data-ttu-id="3825e-107">Andernfalls müssen Sie [Code First-Migrationen](xref:ef6/modeling/code-first/migrations/index) lesen, bevor Sie fortfahren.</span><span class="sxs-lookup"><span data-stu-id="3825e-107">If you don’t, then you’ll need to read [Code First Migrations](xref:ef6/modeling/code-first/migrations/index) before continuing.</span></span>

## <a name="copy-migrateexe"></a><span data-ttu-id="3825e-108">Kopieren migrate.exe</span><span class="sxs-lookup"><span data-stu-id="3825e-108">Copy migrate.exe</span></span>

<span data-ttu-id="3825e-109">Wenn Sie Entity Framework mithilfe von nuget installieren, befindet sich migrate.exe im Ordner Tools des heruntergeladenen Pakets.</span><span class="sxs-lookup"><span data-stu-id="3825e-109">When you install Entity Framework using NuGet migrate.exe will be inside the tools folder of the downloaded package.</span></span> <span data-ttu-id="3825e-110">In &lt; Projektordner &gt; \\ Paketen \\ EntityFramework. &lt; Versions &gt; \\ Tools</span><span class="sxs-lookup"><span data-stu-id="3825e-110">In &lt;project folder&gt;\\packages\\EntityFramework.&lt;version&gt;\\tools</span></span>

<span data-ttu-id="3825e-111">Wenn Sie migrate.exe haben, müssen Sie Sie an den Speicherort der Assembly kopieren, die ihre Migrationen enthält.</span><span class="sxs-lookup"><span data-stu-id="3825e-111">Once you have migrate.exe then you need to copy it to the location of the assembly that contains your migrations.</span></span>

<span data-ttu-id="3825e-112">Wenn Ihre Anwendung auf .NET 4 und nicht auf 4,5 abzielt, müssen Sie die **Redirect.config** in den Speicherort kopieren und **migrate.exe.config**umbenennen. Dies bewirkt, dass migrate.exe die richtigen Bindungs Umleitungen abruft, um die Entity Framework Assembly suchen zu können.</span><span class="sxs-lookup"><span data-stu-id="3825e-112">If your application targets .NET 4, and not 4.5, then you will need to copy the **Redirect.config** into the location as well and rename it **migrate.exe.config**. This is so that migrate.exe gets the correct binding redirects to be able to locate the Entity Framework assembly.</span></span>

| <span data-ttu-id="3825e-113">.NET 4.5</span><span class="sxs-lookup"><span data-stu-id="3825e-113">.NET 4.5</span></span>                                      | <span data-ttu-id="3825e-114">.NET 4,0</span><span class="sxs-lookup"><span data-stu-id="3825e-114">.NET 4.0</span></span>                                      |
|:----------------------------------------------|:----------------------------------------------|
| ![.NET 4,5-Dateien](~/ef6/media/net45files.png) | ![.NET 4,0-Dateien](~/ef6/media/net40files.png) |

> [!NOTE]
> <span data-ttu-id="3825e-117">migrate.exe unterstützt keine x64-Assemblys.</span><span class="sxs-lookup"><span data-stu-id="3825e-117">migrate.exe doesn't support x64 assemblies.</span></span>

<span data-ttu-id="3825e-118">Nachdem Sie die migrate.exe in den richtigen Ordner verschoben haben, sollten Sie Sie verwenden können, um Migrationen für die Datenbank auszuführen.</span><span class="sxs-lookup"><span data-stu-id="3825e-118">Once you have moved migrate.exe to the correct folder then you should be able to use it to execute migrations against the database.</span></span> <span data-ttu-id="3825e-119">Das gesamte Hilfsprogramm ist für das Ausführen von Migrationen konzipiert.</span><span class="sxs-lookup"><span data-stu-id="3825e-119">All the utility is designed to do is execute migrations.</span></span> <span data-ttu-id="3825e-120">Es können keine Migrationen generiert oder ein SQL-Skript erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="3825e-120">It cannot generate migrations or create a SQL script.</span></span>

## <a name="see-options"></a><span data-ttu-id="3825e-121">Siehe Optionen</span><span class="sxs-lookup"><span data-stu-id="3825e-121">See options</span></span>

``` console
Migrate.exe /?
```

<span data-ttu-id="3825e-122">Im obigen Beispiel wird die Hilfeseite angezeigt, die mit diesem Hilfsprogramm verknüpft ist. Beachten Sie, dass sich die EntityFramework.dll an demselben Speicherort befinden muss, den Sie migrate.exe ausführen, damit dies funktioniert.</span><span class="sxs-lookup"><span data-stu-id="3825e-122">The above will display the help page associated with this utility, note that you will need to have the EntityFramework.dll in the same location that you are running migrate.exe in order for this to work.</span></span>

## <a name="migrate-to-the-latest-migration"></a><span data-ttu-id="3825e-123">Migrieren zur neuesten Migration</span><span class="sxs-lookup"><span data-stu-id="3825e-123">Migrate to the latest migration</span></span>

``` console
Migrate.exe MyMvcApplication.dll /startupConfigurationFile="..\\web.config"
```

<span data-ttu-id="3825e-124">Wenn Sie migrate.exe ausführen, ist die Assembly der einzige erforderliche Parameter, bei dem es sich um die Assembly handelt, die die Migrationen enthält, die Sie ausführen möchten. allerdings werden alle auf der Konvention basierenden Einstellungen verwendet, wenn Sie die Konfigurationsdatei nicht angeben.</span><span class="sxs-lookup"><span data-stu-id="3825e-124">When running migrate.exe the only mandatory parameter is the assembly, which is the assembly that contains the migrations that you are trying to run, but it will use all convention based settings if you do not specify the configuration file.</span></span>

## <a name="migrate-to-a-specific-migration"></a><span data-ttu-id="3825e-125">Migrieren zu einer bestimmten Migration</span><span class="sxs-lookup"><span data-stu-id="3825e-125">Migrate to a specific migration</span></span>

``` console
Migrate.exe MyApp.exe /startupConfigurationFile="MyApp.exe.config" /targetMigration="AddTitle"
```

<span data-ttu-id="3825e-126">Wenn Sie Migrationen bis zu einer bestimmten Migration ausführen möchten, können Sie den Namen der Migration angeben.</span><span class="sxs-lookup"><span data-stu-id="3825e-126">If you want to run migrations up to a specific migration, then you can specify the name of the migration.</span></span> <span data-ttu-id="3825e-127">Dadurch werden alle vorherigen Migrationen nach Bedarf ausgeführt, bis die Migration durchgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="3825e-127">This will run all previous migrations as required until getting to the migration specified.</span></span>

## <a name="specify-working-directory"></a><span data-ttu-id="3825e-128">Arbeitsverzeichnis angeben</span><span class="sxs-lookup"><span data-stu-id="3825e-128">Specify working directory</span></span>

``` console
Migrate.exe MyApp.exe /startupConfigurationFile="MyApp.exe.config" /startupDirectory="c:\\MyApp"
```

<span data-ttu-id="3825e-129">Wenn die Assembly über Abhängigkeiten verfügt oder Dateien relativ zum Arbeitsverzeichnis liest, müssen Sie startupdirectory festlegen.</span><span class="sxs-lookup"><span data-stu-id="3825e-129">If you assembly has dependencies or reads files relative to the working directory then you will need to set startupDirectory.</span></span>

## <a name="specify-migration-configuration-to-use"></a><span data-ttu-id="3825e-130">Zu verwendende Migrations Konfiguration angeben</span><span class="sxs-lookup"><span data-stu-id="3825e-130">Specify migration configuration to use</span></span>

``` console
Migrate.exe MyAssembly CustomConfig /startupConfigurationFile="..\\web.config"
```

<span data-ttu-id="3825e-131">Wenn Sie über mehrere Migrations Konfigurations Klassen verfügen, die von dbmigrationconfiguration erben, müssen Sie angeben, welche für diese Ausführung verwendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="3825e-131">If you have multiple migration configuration classes, classes inheriting from DbMigrationConfiguration, then you need to specify which is to be used for this execution.</span></span> <span data-ttu-id="3825e-132">Diese Angabe wird angegeben, indem der optionale zweite Parameter ohne einen Switch wie oben angegeben wird.</span><span class="sxs-lookup"><span data-stu-id="3825e-132">This is specified by providing the optional second parameter without a switch as above.</span></span>

## <a name="provide-connection-string"></a><span data-ttu-id="3825e-133">Verbindungs Zeichenfolge angeben</span><span class="sxs-lookup"><span data-stu-id="3825e-133">Provide connection string</span></span>

``` console
Migrate.exe BlogDemo.dll /connectionString="Data Source=localhost;Initial Catalog=BlogDemo;Integrated Security=SSPI" /connectionProviderName="System.Data.SqlClient"
```

<span data-ttu-id="3825e-134">Wenn Sie in der Befehlszeile eine Verbindungs Zeichenfolge angeben möchten, müssen Sie auch den Anbieter Namen angeben.</span><span class="sxs-lookup"><span data-stu-id="3825e-134">If you wish to specify a connection string at the command line then you must also provide the provider name.</span></span> <span data-ttu-id="3825e-135">Wenn Sie den Anbieter Namen nicht angeben, wird eine Ausnahme ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="3825e-135">Not specifying the provider name will cause an exception.</span></span>

## <a name="common-problems"></a><span data-ttu-id="3825e-136">Häufige Probleme</span><span class="sxs-lookup"><span data-stu-id="3825e-136">Common Problems</span></span>

| <span data-ttu-id="3825e-137">Fehlermeldung</span><span class="sxs-lookup"><span data-stu-id="3825e-137">Error Message</span></span>                                                                                                                                                                                                                                                                                                                      | <span data-ttu-id="3825e-138">Lösung</span><span class="sxs-lookup"><span data-stu-id="3825e-138">Solution</span></span>                                                                                                                                                                                                                                                                                             |
|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="3825e-139">Unbehandelte Ausnahme: System. IO. FileLoadException: die Datei oder Assembly "EntityFramework, Version = 5.0.0.0, Culture = neutral, PublicKeyToken = b77a5c561934e089" oder eine ihrer Abhängigkeiten konnte nicht geladen werden.</span><span class="sxs-lookup"><span data-stu-id="3825e-139">Unhandled Exception: System.IO.FileLoadException:  Could not load file or assembly 'EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' or one of its dependencies.</span></span> <span data-ttu-id="3825e-140">Die Manifest-Definition der lokalisierte Assembly stimmt nicht mit dem Assemblyverweis.</span><span class="sxs-lookup"><span data-stu-id="3825e-140">The located assembly's manifest definition does not match the assembly reference.</span></span> <span data-ttu-id="3825e-141">(Ausnahme von HRESULT: 0x80131040)</span><span class="sxs-lookup"><span data-stu-id="3825e-141">(Exception from HRESULT: 0x80131040)</span></span>         | <span data-ttu-id="3825e-142">Dies bedeutet in der Regel, dass Sie eine .NET 4-Anwendung ohne die Redirect.config-Datei ausführen.</span><span class="sxs-lookup"><span data-stu-id="3825e-142">This typically means that you are running a .NET 4 application without the Redirect.config file.</span></span> <span data-ttu-id="3825e-143">Sie müssen die Redirect.config an denselben Speicherort wie migrate.exe kopieren und in migrate.exe.config umbenennen.</span><span class="sxs-lookup"><span data-stu-id="3825e-143">You need to copy the Redirect.config to the same location as migrate.exe and rename it to migrate.exe.config.</span></span>                                                                                       |
| <span data-ttu-id="3825e-144">Unbehandelte Ausnahme: System. IO. FileLoadException: die Datei oder Assembly "EntityFramework, Version = 4.4.0.0, Culture = neutral, PublicKeyToken = b77a5c561934e089" oder eine ihrer Abhängigkeiten konnte nicht geladen werden.</span><span class="sxs-lookup"><span data-stu-id="3825e-144">Unhandled Exception: System.IO.FileLoadException: Could not load file or assembly 'EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' or one of its dependencies.</span></span> <span data-ttu-id="3825e-145">Die Manifest-Definition der lokalisierte Assembly stimmt nicht mit dem Assemblyverweis.</span><span class="sxs-lookup"><span data-stu-id="3825e-145">The located assembly's manifest definition does not match the assembly reference.</span></span> <span data-ttu-id="3825e-146">(Ausnahme von HRESULT: 0x80131040)</span><span class="sxs-lookup"><span data-stu-id="3825e-146">(Exception from HRESULT: 0x80131040)</span></span>          | <span data-ttu-id="3825e-147">Diese Ausnahme bedeutet, dass Sie eine .NET 4,5-Anwendung ausführen, bei der der Redirect.config in den migrate.exe Speicherort kopiert wurde.</span><span class="sxs-lookup"><span data-stu-id="3825e-147">This exception means that you are running a .NET 4.5 application with the Redirect.config copied to the migrate.exe location.</span></span> <span data-ttu-id="3825e-148">Wenn Ihre APP .NET 4,5 ist, muss die Konfigurationsdatei nicht mit den Umleitungen innerhalb von vorhanden sein.</span><span class="sxs-lookup"><span data-stu-id="3825e-148">If your app is .NET 4.5 then you do not need to have the config file with the redirects inside.</span></span> <span data-ttu-id="3825e-149">Löschen Sie die migrate.exe.config Datei.</span><span class="sxs-lookup"><span data-stu-id="3825e-149">Delete the migrate.exe.config file.</span></span>                                    |
| <span data-ttu-id="3825e-150">Fehler: die Datenbank kann nicht so aktualisiert werden, dass Sie dem aktuellen Modell entspricht, weil ausstehende Änderungen vorhanden sind und die automatische Migration deaktiviert ist.</span><span class="sxs-lookup"><span data-stu-id="3825e-150">ERROR: Unable to update database to match the current model because there are pending changes and automatic migration is disabled.</span></span> <span data-ttu-id="3825e-151">Schreiben Sie entweder die ausstehenden Modelländerungen in eine Code basierte Migration, oder aktivieren Sie die automatische Migration.</span><span class="sxs-lookup"><span data-stu-id="3825e-151">Either write the pending model changes to a code-based migration or enable automatic migration.</span></span> <span data-ttu-id="3825e-152">Legen Sie dbmigrationsconfiguration. automaticmigrationsenabled auf "true" fest, um die automatische Migration zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="3825e-152">Set DbMigrationsConfiguration.AutomaticMigrationsEnabled to true to enable automatic migration.</span></span> | <span data-ttu-id="3825e-153">Dieser Fehler tritt auf, wenn eine Migration ausgeführt wird, wenn Sie keine Migration erstellt haben, um Änderungen am Modell zu bewältigen, und die Datenbank nicht mit dem Modell identisch ist.</span><span class="sxs-lookup"><span data-stu-id="3825e-153">This error occurs if running migrate when you haven’t created a migration to cope with changes made to the model, and the database does not match the model.</span></span> <span data-ttu-id="3825e-154">Wenn Sie einer Modell Klasse eine Eigenschaft hinzufügen und dann migrate.exe ausführen, ohne eine Migration zum Aktualisieren der Datenbank zu erstellen, ist ein Beispiel dafür.</span><span class="sxs-lookup"><span data-stu-id="3825e-154">Adding a property to a model class then running migrate.exe without creating a migration to upgrade the database is an example of this.</span></span> |
| <span data-ttu-id="3825e-155">Fehler: der Typ ist für den Member "System. Data. Entity. Migrationen. Design. toolingfacade + updaterunner, EntityFramework, Version = 5.0.0.0, Culture = neutral, PublicKeyToken = b77a5c561934e089" nicht aufgelöst.</span><span class="sxs-lookup"><span data-stu-id="3825e-155">ERROR: Type is not resolved for member 'System.Data.Entity.Migrations.Design.ToolingFacade+UpdateRunner,EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'.</span></span>                                                                                                                                       | <span data-ttu-id="3825e-156">Dieser Fehler kann durch die Angabe eines falschen Start Verzeichnisses verursacht werden.</span><span class="sxs-lookup"><span data-stu-id="3825e-156">This error can be caused by specifying an incorrect startup directory.</span></span> <span data-ttu-id="3825e-157">Dabei muss es sich um den Speicherort der migrate.exe</span><span class="sxs-lookup"><span data-stu-id="3825e-157">This must be the location of migrate.exe</span></span>                                                                                                                                                                                      |
| <span data-ttu-id="3825e-158">Unbehandelte Ausnahme: System. NullReferenceException: der Objekt Verweis ist nicht auf eine Instanz eines Objekts festgelegt.</span><span class="sxs-lookup"><span data-stu-id="3825e-158">Unhandled Exception: System.NullReferenceException: Object reference not set to an instance of an object.</span></span> <br/>   <span data-ttu-id="3825e-159">bei System. Data. Entity. Migrationen. Console. Program. Main (String [] args)</span><span class="sxs-lookup"><span data-stu-id="3825e-159">at System.Data.Entity.Migrations.Console.Program.Main(String[] args)</span></span>                                                                                                                                             | <span data-ttu-id="3825e-160">Dies kann dadurch verursacht werden, dass kein erforderlicher Parameter für ein von Ihnen verwentigtes Szenario angegeben wird.</span><span class="sxs-lookup"><span data-stu-id="3825e-160">This can be caused by not specifying a required parameter for a scenario that you are using.</span></span> <span data-ttu-id="3825e-161">Beispielsweise wird eine Verbindungs Zeichenfolge ohne Angabe des Anbieter namens angegeben.</span><span class="sxs-lookup"><span data-stu-id="3825e-161">For example specifying a connection string without specifying the provider name.</span></span>                                                                                                                        |
| <span data-ttu-id="3825e-162">Fehler: in der Assembly "ClassLibrary1" wurde mehr als ein Migrations Konfigurationstyp gefunden.</span><span class="sxs-lookup"><span data-stu-id="3825e-162">ERROR: More than one migrations configuration type was found in the assembly 'ClassLibrary1'.</span></span> <span data-ttu-id="3825e-163">Geben Sie den Namen des zu verwendenden an.</span><span class="sxs-lookup"><span data-stu-id="3825e-163">Specify the name of the one to use.</span></span>                                                                                                                                                                                                  | <span data-ttu-id="3825e-164">Da der Fehlerstatus ist, gibt es in der angegebenen Assembly mehr als eine Konfigurations Klasse.</span><span class="sxs-lookup"><span data-stu-id="3825e-164">As the error states, there is more than one configuration class in the given assembly.</span></span> <span data-ttu-id="3825e-165">Sie müssen den/configurationType-Schalter verwenden, um anzugeben, welche verwendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="3825e-165">You must use the /configurationType switch to specify which to use.</span></span>                                                                                                                                           |
| <span data-ttu-id="3825e-166">Fehler: die Datei oder Assembly " &lt; AssemblyName &gt; " oder eine ihrer Abhängigkeiten konnte nicht geladen werden.</span><span class="sxs-lookup"><span data-stu-id="3825e-166">ERROR: Could not load file or assembly ‘&lt;assemblyName&gt;’ or one of its dependencies.</span></span> <span data-ttu-id="3825e-167">Der angegebene Assemblyname oder die angegebene Codebasis war ungültig.</span><span class="sxs-lookup"><span data-stu-id="3825e-167">The given assembly name or codebase was invalid.</span></span> <span data-ttu-id="3825e-168">(Ausnahme von HRESULT: 0x80131047)</span><span class="sxs-lookup"><span data-stu-id="3825e-168">(Exception from HRESULT: 0x80131047)</span></span>                                                                                                                                                    | <span data-ttu-id="3825e-169">Dies kann dadurch verursacht werden, dass ein AssemblyName falsch angegeben oder nicht vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="3825e-169">This can be caused by specifying an assembly name incorrectly or not having</span></span>                                                                                                                                                                                                                          |
| <span data-ttu-id="3825e-170">Fehler: die Datei oder Assembly " &lt; AssemblyName &gt; " oder eine ihrer Abhängigkeiten konnte nicht geladen werden.</span><span class="sxs-lookup"><span data-stu-id="3825e-170">ERROR: Could not load file or assembly ‘&lt;assemblyName&gt;' or one of its dependencies.</span></span> <span data-ttu-id="3825e-171">Es wurde versucht, ein Programm mit einem falschen Format zu laden.</span><span class="sxs-lookup"><span data-stu-id="3825e-171">An attempt was made to load a program with an incorrect format.</span></span>                                                                                                                                                                          | <span data-ttu-id="3825e-172">Dies geschieht, wenn Sie versuchen, migrate.exe für eine x64-Anwendung auszuführen.</span><span class="sxs-lookup"><span data-stu-id="3825e-172">This happens if you are trying to run migrate.exe against an x64 application.</span></span> <span data-ttu-id="3825e-173">EF 5,0 und niedriger ist nur auf x86 funktionsfähig.</span><span class="sxs-lookup"><span data-stu-id="3825e-173">EF 5.0 and below will only work on x86.</span></span>                                                                                                                                                                                |
