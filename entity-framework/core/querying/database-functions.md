---
title: 'Datenbankfunktionen: EF Core'
description: Informationen zu Datenbankfunktionen, die bei der Übersetzung von EF Core-Abfragen unterstützt werden
author: smitpatel
ms.date: 11/10/2020
uid: core/querying/database-functions
ms.openlocfilehash: 34ced2a602168f6ed84763c046ef581cb87026e8
ms.sourcegitcommit: 42bbf7f68e92c364c5fff63092d3eb02229f568d
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 11/11/2020
ms.locfileid: "94503781"
---
# <a name="database-functions"></a><span data-ttu-id="9067d-103">Datenbankfunktionen</span><span class="sxs-lookup"><span data-stu-id="9067d-103">Database Functions</span></span>

<span data-ttu-id="9067d-104">Datenbankfunktionen sind die Datenbankentsprechung von [C#-Methoden](/dotnet/csharp/programming-guide/classes-and-structs/methods).</span><span class="sxs-lookup"><span data-stu-id="9067d-104">Database functions are the database equivalent of [C# methods](/dotnet/csharp/programming-guide/classes-and-structs/methods).</span></span> <span data-ttu-id="9067d-105">Eine Datenbankfunktion kann mit null oder mehr Parametern aufgerufen werden und berechnet das Ergebnis auf Grundlage der Parameterwerte.</span><span class="sxs-lookup"><span data-stu-id="9067d-105">A database function can be invoked with zero or more parameters and it computes the result based on the parameter values.</span></span> <span data-ttu-id="9067d-106">Die meisten Datenbanken, die SQL für Abfragen verwenden, unterstützen Datenbankfunktionen.</span><span class="sxs-lookup"><span data-stu-id="9067d-106">Most databases, which use SQL for querying have support for database functions.</span></span> <span data-ttu-id="9067d-107">Deshalb ermöglicht SQL, die bei der Übersetzung von EF Core-Abfragen generiert wird, auch das Aufrufen von Datenbankfunktionen.</span><span class="sxs-lookup"><span data-stu-id="9067d-107">So SQL generated by EF Core query translation also allows invoking database functions.</span></span> <span data-ttu-id="9067d-108">C#-Methoden müssen nicht zwangsläufig in Datenbankfunktionen in EF Core übersetzt werden.</span><span class="sxs-lookup"><span data-stu-id="9067d-108">C# methods don't have to translate strictly to database functions in EF Core.</span></span>

- <span data-ttu-id="9067d-109">Eine C#-Methode hat möglicherweise keine entsprechende Datenbankfunktion.</span><span class="sxs-lookup"><span data-stu-id="9067d-109">A C# method may not have an equivalent database function.</span></span>
  - <span data-ttu-id="9067d-110">Die <xref:System.String.IsNullOrEmpty%2A?displayProperty=nameWithType>-Methode wird in eine Prüfung auf NULL und einen Vergleich mit einer leeren Zeichenfolge in der Datenbank und nicht in eine Funktion übersetzt.</span><span class="sxs-lookup"><span data-stu-id="9067d-110"><xref:System.String.IsNullOrEmpty%2A?displayProperty=nameWithType> method translates to a null check and a comparison with an empty string in the database rather than a function.</span></span>
  - <span data-ttu-id="9067d-111">Die <xref:System.String.Equals(System.String,System.StringComparison)?displayProperty=nameWithType>-Methode hat keine Datenbankentsprechung, da Zeichenfolgenvergleiche in einer Datenbank nicht einfach dargestellt oder imitiert werden können.</span><span class="sxs-lookup"><span data-stu-id="9067d-111"><xref:System.String.Equals(System.String,System.StringComparison)?displayProperty=nameWithType> method doesn't have database equivalent since string comparison can't be represented or mimicked easily in a database.</span></span>
- <span data-ttu-id="9067d-112">Eine Datenbankfunktion hat möglicherweise keine entsprechende C#-Methode.</span><span class="sxs-lookup"><span data-stu-id="9067d-112">A database function may not have an equivalent C# method.</span></span> <span data-ttu-id="9067d-113">Der Operator `??` in C#, der über keine Methoden verfügt, wird in der Datenbank in die Funktion `COALESCE` übersetzt.</span><span class="sxs-lookup"><span data-stu-id="9067d-113">The `??` operator in C#, which doesn't have any method, translates to the `COALESCE` function in the database.</span></span>

## <a name="types-of-database-functions"></a><span data-ttu-id="9067d-114">Typen von Datenbankfunktionen</span><span class="sxs-lookup"><span data-stu-id="9067d-114">Types of database functions</span></span>

<span data-ttu-id="9067d-115">Die SQL-Generierung durch EF Core unterstützt eine Teilmenge von Funktionen, die in Datenbanken verwendet werden können.</span><span class="sxs-lookup"><span data-stu-id="9067d-115">EF Core SQL generation supports a subset of functions that can be used in databases.</span></span> <span data-ttu-id="9067d-116">Diese Einschränkung ergibt sich aus der Möglichkeit, eine Abfrage in LINQ für die angegebene Datenbankfunktion darzustellen.</span><span class="sxs-lookup"><span data-stu-id="9067d-116">This limitation comes from the ability to represent a query in LINQ for the given database function.</span></span> <span data-ttu-id="9067d-117">Darüber hinaus unterstützt jede Datenbank unterschiedliche Datenbankfunktionen, weshalb EF Core eine gemeinsame Teilmenge bietet.</span><span class="sxs-lookup"><span data-stu-id="9067d-117">Further, each database has varying support of database functions, so EF Core provides a common subset.</span></span> <span data-ttu-id="9067d-118">Ein Datenbankanbieter kann die SQL-Generierung durch EF Core erweitern, um weitere Muster zu unterstützen.</span><span class="sxs-lookup"><span data-stu-id="9067d-118">A database provider is free to extend EF Core SQL generation to support more patterns.</span></span> <span data-ttu-id="9067d-119">Es folgen die Arten von Datenbankfunktionen, die EF Core unterstützt und eindeutig identifiziert.</span><span class="sxs-lookup"><span data-stu-id="9067d-119">Following are the types of database functions EF Core supports and uniquely identifies.</span></span> <span data-ttu-id="9067d-120">Diese Begriffe tragen auch zum Verständnis bei, welche Übersetzungen in EF Core-Anbieter integriert sind.</span><span class="sxs-lookup"><span data-stu-id="9067d-120">These terms also help in understanding what translations come built in with EF Core providers.</span></span>

### <a name="built-in-vs-user-defined-functions"></a><span data-ttu-id="9067d-121">Vergleich von integrierten und benutzerdefinierten Funktionen</span><span class="sxs-lookup"><span data-stu-id="9067d-121">Built-in vs user-defined functions</span></span>

<span data-ttu-id="9067d-122">Integrierte Funktionen sind in der Datenbank vordefiniert, während benutzerdefinierte Funktionen explizit vom Benutzer in der Datenbank definiert werden.</span><span class="sxs-lookup"><span data-stu-id="9067d-122">Built-in functions come with database predefined, but user-defined functions are explicitly defined by the user in the database.</span></span> <span data-ttu-id="9067d-123">Wenn EF Core Abfragen zur Nutzung von Datenbankfunktionen übersetzt, werden integrierte Funktionen verwendet, um sicherzustellen, dass die Funktion stets in der Datenbank verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="9067d-123">When EF Core translates queries to use database functions, it uses built-in functions to make sure that the function is always available on the database.</span></span> <span data-ttu-id="9067d-124">Die Trennung integrierter Funktionen ist in einigen Datenbanken notwendig, um SQL ordnungsgemäß zu generieren.</span><span class="sxs-lookup"><span data-stu-id="9067d-124">The distinction of built-in functions is necessary in some databases to generate SQL correctly.</span></span> <span data-ttu-id="9067d-125">Beispielsweise verlangt SqlServer, dass jede benutzerdefinierte Funktion mit einem durch das Schema qualifizierten Namen aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="9067d-125">For example SqlServer requires that every user-defined function is invoked with a schema-qualified name.</span></span> <span data-ttu-id="9067d-126">Integrierte Funktionen in SqlServer haben jedoch kein Schema.</span><span class="sxs-lookup"><span data-stu-id="9067d-126">But built-in functions in SqlServer don't have a schema.</span></span> <span data-ttu-id="9067d-127">PostgreSQL definiert integrierte Funktionen im Schema `public`, die jedoch mit vom Schema qualifizierten Namen aufgerufen werden können.</span><span class="sxs-lookup"><span data-stu-id="9067d-127">PostgreSQL defines built-in function in the `public` schema but they can be invoked with schema-qualified names.</span></span>

### <a name="aggregate-vs-scalar-vs-table-valued-functions"></a><span data-ttu-id="9067d-128">Vergleich von Aggregat-, Skalar- und Tabellenwertfunktionen</span><span class="sxs-lookup"><span data-stu-id="9067d-128">Aggregate vs scalar vs table-valued functions</span></span>

- <span data-ttu-id="9067d-129">Skalare Funktionen verwenden skalare Werte wie z. B. ganze Zahlen oder Zeichenfolgen als Parameter und geben als Ergebnis einen skalaren Wert zurück.</span><span class="sxs-lookup"><span data-stu-id="9067d-129">Scalar functions take scalar values - like integers or strings - as parameters and return a scalar value as the result.</span></span> <span data-ttu-id="9067d-130">Skalare Funktionen können überall in SQL dort verwendet werden, wo ein skalarer Wert übergeben werden kann.</span><span class="sxs-lookup"><span data-stu-id="9067d-130">Scalar functions can be used anywhere in SQL where a scalar value can be passed.</span></span>
- <span data-ttu-id="9067d-131">Aggregatfunktionen verwenden einen Datenstrom aus skalaren Werten als Parameter und geben als Ergebnis einen skalaren Wert zurück.</span><span class="sxs-lookup"><span data-stu-id="9067d-131">Aggregate functions take a stream of scalar values as parameters and return a scalar value as the result.</span></span> <span data-ttu-id="9067d-132">Aggregatfunktionen werden auf das gesamte Resultset der Abfrage oder auf eine Gruppe von Werten angewendet, die durch Anwenden des Operators `GROUP BY` generiert wurden.</span><span class="sxs-lookup"><span data-stu-id="9067d-132">Aggregate functions are applied on the whole query result set or on a group of values generated by applying `GROUP BY` operator.</span></span>
- <span data-ttu-id="9067d-133">Tabellenwertfunktionen verwenden skalare Werte als Parameter und geben als Ergebnis einen Datenstrom mit Zeilen zurück.</span><span class="sxs-lookup"><span data-stu-id="9067d-133">Table-valued functions take scalar values as parameter(s) and return a stream of rows as the result.</span></span> <span data-ttu-id="9067d-134">Tabellenwertfunktionen werden in der `FROM`-Klausel als Tabellenquelle verwendet.</span><span class="sxs-lookup"><span data-stu-id="9067d-134">Table-valued functions are used as a table source in `FROM` clause.</span></span>

### <a name="niladic-functions"></a><span data-ttu-id="9067d-135">NILADIC-Funktionen</span><span class="sxs-lookup"><span data-stu-id="9067d-135">Niladic functions</span></span>

<span data-ttu-id="9067d-136">NILADIC-Funktionen sind spezielle Datenbankfunktionen, die keine Parameter aufweisen und ohne Klammer aufgerufen werden müssen.</span><span class="sxs-lookup"><span data-stu-id="9067d-136">Niladic functions are special database functions that don't have any parameters and must be invoked without parenthesis.</span></span> <span data-ttu-id="9067d-137">Sie sind vergleichbar mit dem Zugriff auf Eigenschaften/Felder in einer Instanz in C#.</span><span class="sxs-lookup"><span data-stu-id="9067d-137">They're similar to property/field access on an instance in C#.</span></span> <span data-ttu-id="9067d-138">NILADIC-Funktionen unterscheiden sich von parameterlosen Funktionen, da letztere leere Klammern erfordern.</span><span class="sxs-lookup"><span data-stu-id="9067d-138">Niladic functions differ from parameter-less functions as the latter require empty parenthesis.</span></span> <span data-ttu-id="9067d-139">Es gibt keinen speziellen Namen für Datenbankfunktionen, die stets Klammern erfordern.</span><span class="sxs-lookup"><span data-stu-id="9067d-139">There's no special name for database functions that requires parenthesis always.</span></span> <span data-ttu-id="9067d-140">Eine weitere Teilmenge von Datenbankfunktionen, die auf der Parameteranzahl basiert, sind variadische Funktionen.</span><span class="sxs-lookup"><span data-stu-id="9067d-140">Another subset of database functions based on parameter count is variadic functions.</span></span> <span data-ttu-id="9067d-141">Variadische Funktionen können beim Aufrufen unterschiedlich viele Parameter aufweisen.</span><span class="sxs-lookup"><span data-stu-id="9067d-141">Variadic functions can take varying number of parameters when invoked.</span></span>

## <a name="database-function-mappings-in-ef-core"></a><span data-ttu-id="9067d-142">Zuordnungen von Datenbankfunktion in EF Core</span><span class="sxs-lookup"><span data-stu-id="9067d-142">Database function mappings in EF Core</span></span>

<span data-ttu-id="9067d-143">EF Core unterstützt drei verschiedene Arten der Zuordnung zwischen C#- und Datenbankfunktionen.</span><span class="sxs-lookup"><span data-stu-id="9067d-143">EF Core supports three different ways of mapping between C# functions and database functions.</span></span>

### <a name="built-in-function-mapping"></a><span data-ttu-id="9067d-144">Zuordnung integrierter Funktionen</span><span class="sxs-lookup"><span data-stu-id="9067d-144">Built-in function mapping</span></span>

<span data-ttu-id="9067d-145">Standardmäßig bieten EF Core-Anbieter Zuordnungen für verschiedene integrierte Funktionen über primitive Typen.</span><span class="sxs-lookup"><span data-stu-id="9067d-145">By default EF Core providers provide mappings for various built-in functions over primitive types.</span></span> <span data-ttu-id="9067d-146"><xref:System.String.ToLower?displayProperty=nameWithType> wird in SqlServer beispielsweise in `LOWER` übersetzt.</span><span class="sxs-lookup"><span data-stu-id="9067d-146">For example, <xref:System.String.ToLower?displayProperty=nameWithType> translates to `LOWER` in SqlServer.</span></span> <span data-ttu-id="9067d-147">Diese Funktionalität ermöglicht Benutzern das reibungslose Schreiben von Abfragen in LINQ.</span><span class="sxs-lookup"><span data-stu-id="9067d-147">This functionality allows users to write queries in LINQ seamlessly.</span></span> <span data-ttu-id="9067d-148">Wir liefern in der Regel eine Übersetzung in der Datenbank, die das gleiche Ergebnis wie die C#-Funktion auf Clientseite liefert.</span><span class="sxs-lookup"><span data-stu-id="9067d-148">We usually provide a translation in the database that gives the same result as what the C# function provides on the client side.</span></span> <span data-ttu-id="9067d-149">Um dies zu erreichen, kann die tatsächliche Übersetzung mitunter etwas komplizierter sein als eine Datenbankfunktion.</span><span class="sxs-lookup"><span data-stu-id="9067d-149">Sometimes, to achieve that, the actual translation could be something more complicated than a database function.</span></span> <span data-ttu-id="9067d-150">In einigen Szenarien bieten wir auch die am besten geeignete Übersetzung anstelle einer passenden C#-Semantik.</span><span class="sxs-lookup"><span data-stu-id="9067d-150">In some scenarios, we also provide the most appropriate translation rather than matching C# semantics.</span></span> <span data-ttu-id="9067d-151">Dasselbe Feature wird auch verwendet, um einheitliche Übersetzungen für einige der C#-Memberzugriffe bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="9067d-151">The same feature is also used to provide common translations for some of the C# member accesses.</span></span> <span data-ttu-id="9067d-152"><xref:System.String.Length?displayProperty=nameWithType> wird in SqlServer beispielsweise in `LEN` übersetzt.</span><span class="sxs-lookup"><span data-stu-id="9067d-152">For example, <xref:System.String.Length?displayProperty=nameWithType> translates to `LEN` in SqlServer.</span></span> <span data-ttu-id="9067d-153">Neben Anbietern können auch Plug-In-Autoren zusätzliche Übersetzungen hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="9067d-153">Apart from providers, plugin writers can also add additional translations.</span></span> <span data-ttu-id="9067d-154">Diese Erweiterbarkeit ist nützlich, wenn Plug-Ins Unterstützung für weitere Typen als primitive Typen hinzufügen und Methoden mit deren Hilfe übersetzen möchten.</span><span class="sxs-lookup"><span data-stu-id="9067d-154">This extensibility is useful when plugins add support for more types as primitive types and want to translate methods over them.</span></span>

### <a name="effunctions-mapping"></a><span data-ttu-id="9067d-155">Zuordnung von EF.Functions</span><span class="sxs-lookup"><span data-stu-id="9067d-155">EF.Functions mapping</span></span>

<span data-ttu-id="9067d-156">Da nicht alle Datenbankfunktionen entsprechende C#-Funktionen haben, verfügen EF Core-Anbieter über spezielle C#-Methoden, um bestimmte Datenbankfunktionen aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="9067d-156">Since not all database functions have equivalent C# functions, EF Core providers have special C# methods to invoke certain database functions.</span></span> <span data-ttu-id="9067d-157">Diese Methoden werden als Erweiterungsmethoden über `EF.Functions` definiert, die in LINQ-Abfragen verwendet werden sollen.</span><span class="sxs-lookup"><span data-stu-id="9067d-157">These methods are defined as extension methods over `EF.Functions` to be used in LINQ queries.</span></span> <span data-ttu-id="9067d-158">Diese Methoden sind anbieterspezifisch, da sie eng mit bestimmten Datenbankfunktionen verknüpft sind.</span><span class="sxs-lookup"><span data-stu-id="9067d-158">These methods are provider-specific as they're closely tied with particular database functions.</span></span> <span data-ttu-id="9067d-159">Daher funktioniert eine Methode, die bei einem Anbieter erfolgreich ist, wahrscheinlich bei keinem anderen Anbieter.</span><span class="sxs-lookup"><span data-stu-id="9067d-159">So a method that works for one provider will likely not work for any other provider.</span></span> <span data-ttu-id="9067d-160">Da die Absicht dieser Methoden darin besteht, in der übersetzten Abfrage eine Datenbankfunktion aufzurufen, führt der Versuch, sie auf dem Client auszuwerten, zu einer Ausnahme.</span><span class="sxs-lookup"><span data-stu-id="9067d-160">Further, since the intention of these methods is to invoke a database function in the translated query, trying to evaluate them on the client results in an exception.</span></span>

### <a name="user-defined-function-mapping"></a><span data-ttu-id="9067d-161">Zuordnung benutzerdefinierter Funktionen</span><span class="sxs-lookup"><span data-stu-id="9067d-161">User-defined function mapping</span></span>

<span data-ttu-id="9067d-162">Abgesehen von Zuordnungen, die von EF Core-Anbietern bereitgestellt werden, können Benutzer auch benutzerdefinierte Zuordnungen definieren.</span><span class="sxs-lookup"><span data-stu-id="9067d-162">Apart from mappings provided by EF Core providers, users can also define custom mapping.</span></span> <span data-ttu-id="9067d-163">Eine benutzerdefinierte Zuordnung erweitert die Übersetzung von Abfragen entsprechend den Anforderungen des Benutzers.</span><span class="sxs-lookup"><span data-stu-id="9067d-163">A user-defined mapping extends the query translation according to the user needs.</span></span> <span data-ttu-id="9067d-164">Diese Funktionalität ist nützlich, wenn es in der Datenbank benutzerdefinierte Funktionen gibt, die der Benutzer über seine LINQ-Abfrage aufrufen möchte.</span><span class="sxs-lookup"><span data-stu-id="9067d-164">This functionality is useful when there are user-defined functions in the database, which the user wants to invoke from their LINQ query.</span></span>

## <a name="see-also"></a><span data-ttu-id="9067d-165">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="9067d-165">See also</span></span>

- [<span data-ttu-id="9067d-166">Zuordnung von in SqlServer integrierten Funktionen</span><span class="sxs-lookup"><span data-stu-id="9067d-166">SqlServer built-in function mappings</span></span>](xref:core/providers/sql-server/functions)
- [<span data-ttu-id="9067d-167">Zuordnung von in Sqlite integrierten Funktionen</span><span class="sxs-lookup"><span data-stu-id="9067d-167">Sqlite built-in function mappings</span></span>](xref:core/providers/sqlite/functions)
- [<span data-ttu-id="9067d-168">Zuordnung von in Cosmos integrierten Funktionen</span><span class="sxs-lookup"><span data-stu-id="9067d-168">Cosmos built-in function mappings</span></span>](xref:core/providers/cosmos/functions)
