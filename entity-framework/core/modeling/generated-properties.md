---
title: Generierte Werte-EF Core
description: Konfigurieren der Wert Generierung für Eigenschaften bei Verwendung von Entity Framework Core
author: AndriySvyryd
ms.date: 11/06/2019
uid: core/modeling/generated-properties
ms.openlocfilehash: 347cedbf5fdebc985d75c6cad3c28f17d1344993
ms.sourcegitcommit: f3512e3a98e685a3ba409c1d0157ce85cc390cf4
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/10/2020
ms.locfileid: "94429623"
---
# <a name="generated-values"></a><span data-ttu-id="41402-103">Generierte Werte</span><span class="sxs-lookup"><span data-stu-id="41402-103">Generated Values</span></span>

## <a name="value-generation-patterns"></a><span data-ttu-id="41402-104">Muster Generierungs Muster</span><span class="sxs-lookup"><span data-stu-id="41402-104">Value generation patterns</span></span>

<span data-ttu-id="41402-105">Es gibt drei Muster Generierungs Muster, die für Eigenschaften verwendet werden können:</span><span class="sxs-lookup"><span data-stu-id="41402-105">There are three value generation patterns that can be used for properties:</span></span>

* <span data-ttu-id="41402-106">Keine Wert Generierung</span><span class="sxs-lookup"><span data-stu-id="41402-106">No value generation</span></span>
* <span data-ttu-id="41402-107">Beim Hinzufügen generierter Wert</span><span class="sxs-lookup"><span data-stu-id="41402-107">Value generated on add</span></span>
* <span data-ttu-id="41402-108">Beim Hinzufügen oder aktualisieren generierter Wert</span><span class="sxs-lookup"><span data-stu-id="41402-108">Value generated on add or update</span></span>

### <a name="no-value-generation"></a><span data-ttu-id="41402-109">Keine Wert Generierung</span><span class="sxs-lookup"><span data-stu-id="41402-109">No value generation</span></span>

<span data-ttu-id="41402-110">Keine Wert Generierung bedeutet, dass Sie immer einen gültigen Wert angeben, der in der Datenbank gespeichert werden soll.</span><span class="sxs-lookup"><span data-stu-id="41402-110">No value generation means that you will always supply a valid value to be saved to the database.</span></span> <span data-ttu-id="41402-111">Dieser gültige Wert muss neuen Entitäten zugewiesen werden, bevor Sie dem Kontext hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="41402-111">This valid value must be assigned to new entities before they are added to the context.</span></span>

### <a name="value-generated-on-add"></a><span data-ttu-id="41402-112">Beim Hinzufügen generierter Wert</span><span class="sxs-lookup"><span data-stu-id="41402-112">Value generated on add</span></span>

<span data-ttu-id="41402-113">Beim Hinzufügen generierter Wert bedeutet, dass für neue Entitäten ein Wert generiert wird.</span><span class="sxs-lookup"><span data-stu-id="41402-113">Value generated on add means that a value is generated for new entities.</span></span>

<span data-ttu-id="41402-114">Abhängig vom verwendeten Datenbankanbieter können die Werte Client seitig von EF oder in der Datenbank generiert werden.</span><span class="sxs-lookup"><span data-stu-id="41402-114">Depending on the database provider being used, values may be generated client side by EF or in the database.</span></span> <span data-ttu-id="41402-115">Wenn der Wert von der Datenbank generiert wird, kann EF einen temporären Wert zuweisen, wenn Sie die Entität zum Kontext hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="41402-115">If the value is generated by the database, then EF may assign a temporary value when you add the entity to the context.</span></span> <span data-ttu-id="41402-116">Dieser temporäre Wert wird dann durch den von der Datenbank generierten Wert ersetzt `SaveChanges()` .</span><span class="sxs-lookup"><span data-stu-id="41402-116">This temporary value will then be replaced by the database generated value during `SaveChanges()`.</span></span>

<span data-ttu-id="41402-117">Wenn Sie dem Kontext eine Entität hinzufügen, die über einen Wert verfügt, der der Eigenschaft zugewiesen ist, versucht EF, diesen Wert einzufügen, anstatt einen neuen zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="41402-117">If you add an entity to the context that has a value assigned to the property, then EF will attempt to insert that value rather than generating a new one.</span></span> <span data-ttu-id="41402-118">Einer Eigenschaft wird ein Wert zugewiesen, wenn ihr kein CLR-Standardwert (für, für, `null` `string` `0` `int` `Guid.Empty` `Guid` usw.) zugewiesen ist.</span><span class="sxs-lookup"><span data-stu-id="41402-118">A property is considered to have a value assigned if it is not assigned the CLR default value (`null` for `string`, `0` for `int`, `Guid.Empty` for `Guid`, etc.).</span></span> <span data-ttu-id="41402-119">Weitere Informationen finden Sie unter [explizite Werte für generierte Eigenschaften](xref:core/saving/explicit-values-generated-properties).</span><span class="sxs-lookup"><span data-stu-id="41402-119">For more information, see [Explicit values for generated properties](xref:core/saving/explicit-values-generated-properties).</span></span>

> [!WARNING]
> <span data-ttu-id="41402-120">Die Art, wie der Wert für hinzugefügte Entitäten generiert wird, hängt vom verwendeten Datenbankanbieter ab.</span><span class="sxs-lookup"><span data-stu-id="41402-120">How the value is generated for added entities will depend on the database provider being used.</span></span> <span data-ttu-id="41402-121">Datenbankanbieter richten möglicherweise automatisch die Wert Generierung für einige Eigenschafts Typen ein, bei anderen müssen Sie jedoch möglicherweise manuell festlegen, wie der Wert generiert wird.</span><span class="sxs-lookup"><span data-stu-id="41402-121">Database providers may automatically set up value generation for some property types, but others may require you to manually set up how the value is generated.</span></span>
>
> <span data-ttu-id="41402-122">Wenn Sie z. b. SQL Server verwenden, werden Werte automatisch für `GUID` Eigenschaften generiert (mithilfe des SQL Server sequenziellen GUID-Algorithmus).</span><span class="sxs-lookup"><span data-stu-id="41402-122">For example, when using SQL Server, values will be automatically generated for `GUID` properties (using the SQL Server sequential GUID algorithm).</span></span> <span data-ttu-id="41402-123">Wenn Sie jedoch angeben, dass eine `DateTime` Eigenschaft beim Hinzufügen generiert wird, müssen Sie eine Möglichkeit einrichten, damit die Werte generiert werden.</span><span class="sxs-lookup"><span data-stu-id="41402-123">However, if you specify that a `DateTime` property is generated on add, then you must set up a way for the values to be generated.</span></span> <span data-ttu-id="41402-124">Eine Möglichkeit, dies zu erreichen, besteht darin, einen Standardwert von zu konfigurieren `GETDATE()` , siehe [Standardwerte](#default-values).</span><span class="sxs-lookup"><span data-stu-id="41402-124">One way to do this, is to configure a default value of `GETDATE()`, see [Default Values](#default-values).</span></span>

### <a name="value-generated-on-add-or-update"></a><span data-ttu-id="41402-125">Beim Hinzufügen oder aktualisieren generierter Wert</span><span class="sxs-lookup"><span data-stu-id="41402-125">Value generated on add or update</span></span>

<span data-ttu-id="41402-126">Der beim Hinzufügen oder aktualisieren generierte Wert bedeutet, dass bei jedem Speichern des Datensatzes (einfügen oder aktualisieren) ein neuer Wert generiert wird.</span><span class="sxs-lookup"><span data-stu-id="41402-126">Value generated on add or update means that a new value is generated every time the record is saved (insert or update).</span></span>

<span data-ttu-id="41402-127">`value generated on add`Wenn Sie z. b. einen Wert für die-Eigenschaft in einer neu hinzugefügten Instanz einer Entität angeben, wird dieser Wert anstelle eines generierten Werts eingefügt.</span><span class="sxs-lookup"><span data-stu-id="41402-127">Like `value generated on add`, if you specify a value for the property on a newly added instance of an entity, that value will be inserted rather than a value being generated.</span></span> <span data-ttu-id="41402-128">Es ist auch möglich, bei der Aktualisierung einen expliziten Wert festzulegen.</span><span class="sxs-lookup"><span data-stu-id="41402-128">It is also possible to set an explicit value when updating.</span></span> <span data-ttu-id="41402-129">Weitere Informationen finden Sie unter [explizite Werte für generierte Eigenschaften](xref:core/saving/explicit-values-generated-properties).</span><span class="sxs-lookup"><span data-stu-id="41402-129">For more information, see [Explicit values for generated properties](xref:core/saving/explicit-values-generated-properties).</span></span>

> [!WARNING]
> <span data-ttu-id="41402-130">Die Art und Weise, wie der Wert für hinzugefügte und aktualisierte Entitäten generiert wird, hängt vom verwendeten Datenbankanbieter ab.</span><span class="sxs-lookup"><span data-stu-id="41402-130">How the value is generated for added and updated entities will depend on the database provider being used.</span></span> <span data-ttu-id="41402-131">Datenbankanbieter können die Wert Generierung für einige Eigenschafts Typen automatisch einrichten, während andere manuell festlegen müssen, wie der Wert generiert wird.</span><span class="sxs-lookup"><span data-stu-id="41402-131">Database providers may automatically set up value generation for some property types, while others will require you to manually set up how the value is generated.</span></span>
>
> <span data-ttu-id="41402-132">Wenn Sie z. b. SQL Server verwenden, werden Eigenschaften, die `byte[]` beim Hinzufügen oder aktualisieren als generiert und als Parallelitäts Token gekennzeichnet sind, mit dem `rowversion` -Datentyp festgelegt, sodass Werte in der Datenbank generiert werden.</span><span class="sxs-lookup"><span data-stu-id="41402-132">For example, when using SQL Server, `byte[]` properties that are set as generated on add or update and marked as concurrency tokens, will be set up with the `rowversion` data type - so that values will be generated in the database.</span></span> <span data-ttu-id="41402-133">Wenn Sie jedoch angeben, dass eine `DateTime` Eigenschaft beim Hinzufügen oder aktualisieren generiert wird, müssen Sie eine Möglichkeit einrichten, damit die Werte generiert werden.</span><span class="sxs-lookup"><span data-stu-id="41402-133">However, if you specify that a `DateTime` property is generated on add or update, then you must set up a way for the values to be generated.</span></span> <span data-ttu-id="41402-134">Eine Möglichkeit hierfür besteht darin, den Standardwert `GETDATE()` (siehe [Standardwerte](#default-values)) zu konfigurieren, um Werte für neue Zeilen zu generieren.</span><span class="sxs-lookup"><span data-stu-id="41402-134">One way to do this, is to configure a default value of `GETDATE()` (see [Default Values](#default-values)) to generate values for new rows.</span></span> <span data-ttu-id="41402-135">Sie können dann mithilfe eines Daten Bank Auslösers Werte während der Aktualisierung generieren (z. b. im folgenden Beispiel-auslösen).</span><span class="sxs-lookup"><span data-stu-id="41402-135">You could then use a database trigger to generate values during updates (such as the following example trigger).</span></span>
>
> [!code-sql[Main](../../../samples/core/Modeling/FluentAPI/ValueGeneratedOnAddOrUpdate.sql)]

## <a name="value-generated-on-add"></a><span data-ttu-id="41402-136">Beim Hinzufügen generierter Wert</span><span class="sxs-lookup"><span data-stu-id="41402-136">Value generated on add</span></span>

<span data-ttu-id="41402-137">Gemäß der Konvention sind nicht zusammengesetzte Primärschlüssel vom Typ Short, int, Long oder GUID so eingerichtet, dass Werte für eingefügte Entitäten generiert werden, wenn ein Wert nicht von der Anwendung bereitgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="41402-137">By convention, non-composite primary keys of type short, int, long, or Guid are set up to have values generated for inserted entities, if a value isn't provided by the application.</span></span> <span data-ttu-id="41402-138">Ihr Datenbankanbieter übernimmt in der Regel die erforderliche Konfiguration. Beispielsweise wird ein numerischer Primärschlüssel in SQL Server automatisch als Identitäts Spalte festgelegt.</span><span class="sxs-lookup"><span data-stu-id="41402-138">Your database provider typically takes care of the necessary configuration; for example, a numeric primary key in SQL Server is automatically set up to be an IDENTITY column.</span></span>

<span data-ttu-id="41402-139">Sie können jede Eigenschaft so konfigurieren, dass ihr Wert für eingefügte Entitäten wie folgt generiert wird:</span><span class="sxs-lookup"><span data-stu-id="41402-139">You can configure any property to have its value generated for inserted entities as follows:</span></span>

### <a name="data-annotations"></a>[<span data-ttu-id="41402-140">Daten Anmerkungen</span><span class="sxs-lookup"><span data-stu-id="41402-140">Data Annotations</span></span>](#tab/data-annotations)

[!code-csharp[Main](../../../samples/core/Modeling/DataAnnotations/ValueGeneratedOnAdd.cs?name=ValueGeneratedOnAdd&highlight=5)]

### <a name="fluent-api"></a>[<span data-ttu-id="41402-141">Fluent-API</span><span class="sxs-lookup"><span data-stu-id="41402-141">Fluent API</span></span>](#tab/fluent-api)

[!code-csharp[Main](../../../samples/core/Modeling/FluentAPI/ValueGeneratedOnAdd.cs?name=ValueGeneratedOnAdd&highlight=5)]

***

> [!WARNING]
> <span data-ttu-id="41402-142">Dadurch kann EF nur wissen, dass Werte für hinzugefügte Entitäten generiert werden, und es wird nicht garantiert, dass EF den eigentlichen Mechanismus zum Generieren von Werten einrichtet.</span><span class="sxs-lookup"><span data-stu-id="41402-142">This just lets EF know that values are generated for added entities, it does not guarantee that EF will set up the actual mechanism to generate values.</span></span> <span data-ttu-id="41402-143">Weitere Informationen finden [Sie unter im Abschnitt "hinzufügen" generierter Wert](#value-generated-on-add) .</span><span class="sxs-lookup"><span data-stu-id="41402-143">See [Value generated on add](#value-generated-on-add) section for more details.</span></span>

### <a name="default-values"></a><span data-ttu-id="41402-144">Standardwerte</span><span class="sxs-lookup"><span data-stu-id="41402-144">Default values</span></span>

<span data-ttu-id="41402-145">Bei relationalen Datenbanken kann eine Spalte mit einem Standardwert konfiguriert werden. Wenn eine Zeile ohne einen Wert für diese Spalte eingefügt wird, wird der Standardwert verwendet.</span><span class="sxs-lookup"><span data-stu-id="41402-145">On relational databases, a column can be configured with a default value; if a row is inserted without a value for that column, the default value will be used.</span></span>

<span data-ttu-id="41402-146">Sie können einen Standardwert für eine Eigenschaft konfigurieren:</span><span class="sxs-lookup"><span data-stu-id="41402-146">You can configure a default value on a property:</span></span>

[!code-csharp[Main](../../../samples/core/Modeling/FluentAPI/DefaultValue.cs?name=DefaultValue&highlight=5)]

<span data-ttu-id="41402-147">Sie können auch ein SQL-Fragment angeben, das zum Berechnen des Standardwerts verwendet wird:</span><span class="sxs-lookup"><span data-stu-id="41402-147">You can also specify a SQL fragment that is used to calculate the default value:</span></span>

[!code-csharp[Main](../../../samples/core/Modeling/FluentAPI/DefaultValueSql.cs?name=DefaultValueSql&highlight=5)]

<span data-ttu-id="41402-148">Wenn Sie einen Standardwert angeben, wird die Eigenschaft implizit als Wert konfiguriert, der beim Hinzufügen generiert wird.</span><span class="sxs-lookup"><span data-stu-id="41402-148">Specifying a default value will implicitly configure the property as value generated on add.</span></span>

## <a name="value-generated-on-add-or-update"></a><span data-ttu-id="41402-149">Beim Hinzufügen oder aktualisieren generierter Wert</span><span class="sxs-lookup"><span data-stu-id="41402-149">Value generated on add or update</span></span>

### <a name="data-annotations"></a>[<span data-ttu-id="41402-150">Daten Anmerkungen</span><span class="sxs-lookup"><span data-stu-id="41402-150">Data Annotations</span></span>](#tab/data-annotations)

[!code-csharp[Main](../../../samples/core/Modeling/DataAnnotations/ValueGeneratedOnAddOrUpdate.cs?name=ValueGeneratedOnAddOrUpdate&highlight=5)]

### <a name="fluent-api"></a>[<span data-ttu-id="41402-151">Fluent-API</span><span class="sxs-lookup"><span data-stu-id="41402-151">Fluent API</span></span>](#tab/fluent-api)

[!code-csharp[Main](../../../samples/core/Modeling/FluentAPI/ValueGeneratedOnAddOrUpdate.cs?name=ValueGeneratedOnAddOrUpdate&highlight=5)]

<span data-ttu-id="41402-152">\*\*_</span><span class="sxs-lookup"><span data-stu-id="41402-152">\*\*_</span></span>

> [!WARNING]
> <span data-ttu-id="41402-153">Dies ermöglicht EF nur zu wissen, dass Werte für hinzugefügte oder aktualisierte Entitäten generiert werden. es wird nicht garantiert, dass EF den eigentlichen Mechanismus zum Generieren von Werten einrichtet.</span><span class="sxs-lookup"><span data-stu-id="41402-153">This just lets EF know that values are generated for added or updated entities, it does not guarantee that EF will set up the actual mechanism to generate values.</span></span> <span data-ttu-id="41402-154">Weitere Informationen finden [Sie im Abschnitt hinzufügen oder aktualisieren generierter Wert](#value-generated-on-add-or-update) .</span><span class="sxs-lookup"><span data-stu-id="41402-154">See [Value generated on add or update](#value-generated-on-add-or-update) section for more details.</span></span>

### <a name="computed-columns"></a><span data-ttu-id="41402-155">Berechnete Spalten</span><span class="sxs-lookup"><span data-stu-id="41402-155">Computed columns</span></span>

<span data-ttu-id="41402-156">Bei den meisten relationalen Datenbanken kann eine Spalte so konfiguriert werden, dass ihr Wert in der Datenbank berechnet wird, in der Regel mit einem Ausdruck, der auf andere Spalten verweist:</span><span class="sxs-lookup"><span data-stu-id="41402-156">On most relational databases, a column can be configured to have its value computed in the database, typically with an expression referring to other columns:</span></span>

[!code-csharp[Main](../../../samples/core/Modeling/FluentAPI/ComputedColumn.cs?name=DefaultComputedColumn)]

<span data-ttu-id="41402-157">Im obigen Beispiel wird eine _virtual \* berechnete Spalte erstellt, deren Wert jedes Mal berechnet wird, wenn Sie aus der Datenbank abgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="41402-157">The above creates a _virtual\* computed column, whose value is computed every time it is fetched from the database.</span></span> <span data-ttu-id="41402-158">Sie können auch angeben, dass eine berechnete Spalte *gespeichert* werden soll (manchmal als *persistent bezeichnet)* , was bedeutet, dass Sie bei jedem Update der Zeile berechnet wird und auf dem Datenträger neben regulären Spalten gespeichert wird:</span><span class="sxs-lookup"><span data-stu-id="41402-158">You may also specify that a computed column be *stored* (sometimes called *persisted* ), meaning that it is computed on every update of the row, and is stored on disk alongside regular columns:</span></span>

[!code-csharp[Main](../../../samples/core/Modeling/FluentAPI/ComputedColumn.cs?name=StoredComputedColumn)]

> [!NOTE]
> <span data-ttu-id="41402-159">Unterstützung für das Erstellen gespeicherter berechneter Spalten wurde in EF Core 5,0 hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="41402-159">Support for creating stored computed columns was added in EF Core 5.0.</span></span>

## <a name="no-value-generation"></a><span data-ttu-id="41402-160">Keine Wert Generierung</span><span class="sxs-lookup"><span data-stu-id="41402-160">No value generation</span></span>

<span data-ttu-id="41402-161">Die Deaktivierung der Wert Generierung für eine Eigenschaft ist in der Regel erforderlich, wenn eine Konvention für die Generierung von Werten konfiguriert wird.</span><span class="sxs-lookup"><span data-stu-id="41402-161">Disabling value generation on a property is typically necessary if a convention configures it for value generation.</span></span> <span data-ttu-id="41402-162">Wenn Sie z. b. über einen Primärschlüssel vom Typ "int" verfügen, wird dieser implizit als Wert festgelegt, der beim Hinzufügen generiert wird. Dies kann über Folgendes deaktiviert werden:</span><span class="sxs-lookup"><span data-stu-id="41402-162">For example, if you have a primary key of type int, it will be implicitly set configured as value generated on add; you can disable this via the following:</span></span>

### <a name="data-annotations"></a>[<span data-ttu-id="41402-163">Daten Anmerkungen</span><span class="sxs-lookup"><span data-stu-id="41402-163">Data Annotations</span></span>](#tab/data-annotations)

[!code-csharp[Main](../../../samples/core/Modeling/DataAnnotations/ValueGeneratedNever.cs?name=ValueGeneratedNever&highlight=3)]

### <a name="fluent-api"></a>[<span data-ttu-id="41402-164">Fluent-API</span><span class="sxs-lookup"><span data-stu-id="41402-164">Fluent API</span></span>](#tab/fluent-api)

[!code-csharp[Main](../../../samples/core/Modeling/FluentAPI/ValueGeneratedNever.cs?name=ValueGeneratedNever&highlight=5)]

***
